# Environment Variables Template

## Cloudinary Configuration

```env
# REQUIRED: Cloudinary Cloud Name (public, safe to expose)
# Find at: https://cloudinary.com/console/settings/general
NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME=your_cloud_name_here

# REQUIRED: Cloudinary API Key (use on server only)
# Find at: https://cloudinary.com/console/settings/api-keys
CLOUDINARY_API_KEY=your_api_key_here

# REQUIRED: Cloudinary API Secret (KEEP PRIVATE - server only!)
# Find at: https://cloudinary.com/console/settings/api-keys
CLOUDINARY_API_SECRET=your_api_secret_here

# OPTIONAL: Maximum file size for uploads (in bytes)
# Default: 10485760 (10MB)
NEXT_PUBLIC_MAX_FILE_SIZE=10485760

# OPTIONAL: Allowed file types for uploads
# Default: jpg,jpeg,png,gif,webp,pdf
NEXT_PUBLIC_ALLOWED_FORMATS=jpg,jpeg,png,gif,webp,pdf
```

## Setup Steps

1. **Get Cloudinary account**
   - Sign up at https://cloudinary.com/users/register/free
   - Verify your email

2. **Find your credentials**
   - Go to https://cloudinary.com/console/settings/general
   - Copy your Cloud Name
   - Go to https://cloudinary.com/console/settings/api-keys
   - Copy your API Key and API Secret

3. **Add to .env.local**
   ```bash
   cp .env.example .env.local
   ```
   Edit `.env.local` and paste your credentials

4. **Verify setup**
   ```bash
   npm run dev
   ```
   Check browser console for any Cloudinary errors

## Security Notes

⚠️ **NEVER commit .env.local to version control**

✅ **DO:**
- Keep API Secret safe (server-side only)
- Use public Cloud Name in frontend
- Validate uploads on server
- Monitor Cloudinary dashboard for suspicious activity

❌ **DON'T:**
- Expose API Secret in client code
- Commit environment files
- Log sensitive credentials
- Use test keys in production

## Development vs Production

### Development (.env.local)
- Use test Cloudinary account
- No rate limiting
- Full API access

### Production (.env or CI/CD secrets)
- Use production Cloudinary account
- Consider rate limiting
- Monitor usage and costs
- Set up webhooks for alerts

## Verifying Configuration

Test your Cloudinary setup:

```bash
# In your Next.js app
npm run dev

# Open browser console and check for:
# 1. No "Cloudinary API key missing" errors
# 2. Uploads complete successfully
# 3. Watermark displays correctly
```

## Troubleshooting

**Error: "API key missing"**
- Check `.env.local` has correct environment variables
- Restart dev server after adding env vars

**Error: "Cloud name not found"**
- Verify `NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME` is correct
- Check spelling (case-sensitive)

**Error: "Invalid API secret"**
- Verify `CLOUDINARY_API_SECRET` is correct
- Check no extra spaces

**Uploads still using placeholder URLs**
- Files need to be updated to use new upload actions
- Check that `uploadTestReport` and `uploadWatermark` are called
